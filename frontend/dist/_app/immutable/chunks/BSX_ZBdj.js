import{w as m}from"./DtJFryUL.js";const p={accessPacks:[{id:"pack-family",name:"Family Essentials Pack",description:"Limited access to funeral wishes, immediate contacts, and heirloom stories.",type:"Family",modules:["funeral","contacts","heirlooms"],qrUrl:"",lastGenerated:""},{id:"pack-executor",name:"Executor Master Pack",description:"Full access to financial accounts, legal documents, and digital legacy.",type:"Executor",modules:["all"],qrUrl:"",lastGenerated:""}],assetLabels:[]},u=()=>{const{subscribe:n,set:c,update:a}=m(p);{const s=localStorage.getItem("continuum_qr_store");if(s)try{c(JSON.parse(s))}catch(e){console.error("Failed to load QR store",e)}}const r=s=>{localStorage.setItem("continuum_qr_store",JSON.stringify(s))};return{subscribe:n,generatePackQR:s=>{a(e=>{const t=e.accessPacks.find(o=>o.id===s);if(t){const o=`${window.location.origin}/access?key=${t.id}&type=${t.type}`;t.qrUrl=`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(o)}`,t.lastGenerated=new Date().toISOString()}return r(e),e})},generateAssetQR:s=>{a(e=>{if(e.assetLabels.find(d=>d.assetId===s.assetId))return e;const o=`${window.location.origin}/modules/${s.assetType.toLowerCase()==="heirlooms"?"heirlooms":"property"}?id=${s.assetId}`,i=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(o)}`,l={...s,qrUrl:i};return e.assetLabels=[l,...e.assetLabels],r(e),e})},removeAssetQR:s=>{a(e=>(e.assetLabels=e.assetLabels.filter(t=>t.assetId!==s),r(e),e))}}},y=u();export{y as q};
