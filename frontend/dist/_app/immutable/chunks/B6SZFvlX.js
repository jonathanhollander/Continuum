import{g as o}from"./DtJFryUL.js";import{c as m}from"./lbPixqMI.js";const s=()=>{if(typeof localStorage>"u")return[];if(localStorage.getItem("continuum_owner_insurance_policies"))return[];const i=localStorage.getItem("continuum_insurance_policies");if(i)try{return JSON.parse(i)}catch(u){console.error("Failed to parse insurance policies from localStorage",u)}return[]};function l(){const c=m("insurance_policies",s()),{subscribe:i,set:u,update:a}=c;return{subscribe:i,addPolicy:r=>{const e={...r,id:crypto.randomUUID()};return a(n=>[...n,e]),e},updatePolicy:(r,e)=>{a(n=>n.map(t=>t.id===r?{...t,...e}:t))},deletePolicy:r=>{a(e=>e.filter(n=>n.id!==r))},getPolicy:r=>o({subscribe:i}).find(e=>e.id===r),getPoliciesByType:r=>o({subscribe:i}).filter(e=>e.insuranceType===r),getActivePolicies:()=>o({subscribe:i}).filter(r=>r.status==="Active"),getTotalPremiums:()=>{const r=o({subscribe:i});let e=0,n=0;return r.forEach(t=>{t.status==="Active"&&(t.premiumFrequency==="Monthly"?(e+=t.premiumAmount,n+=t.premiumAmount*12):t.premiumFrequency==="Quarterly"?(e+=t.premiumAmount/3,n+=t.premiumAmount*4):t.premiumFrequency==="Annually"&&(e+=t.premiumAmount/12,n+=t.premiumAmount))}),{monthly:e,annual:n}},clear:()=>{u([])}}}const p=l();export{p as i};
