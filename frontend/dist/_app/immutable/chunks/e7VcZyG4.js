import{c as d,a as s}from"./lbPixqMI.js";const a={organDonor:!1,bloodType:"",allergies:"",directives:[]},l=()=>{if(s("continuum_owner_medical_store"))return a;const t=s("continuum_medical_store");if(t)try{const i=JSON.parse(t);return{...a,...i}}catch(i){console.error("Migration failed for medical store",i)}return a};function u(){const n=d("medical_store",l()),{subscribe:t,update:i}=n;return{subscribe:t,updateProfile:r=>{i(e=>({...e,...r}))},addDirective:r=>{i(e=>({...e,directives:[...e.directives,{...r,id:crypto.randomUUID()}]}))},updateDirective:(r,e)=>{i(c=>({...c,directives:c.directives.map(o=>o.id===r?{...o,...e}:o)}))},removeDirective:r=>{i(e=>({...e,directives:e.directives.filter(c=>c.id!==r)}))}}}const f=u();export{f as m};
