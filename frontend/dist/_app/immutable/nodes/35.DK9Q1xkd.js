import{c as Pe,a as p,d as $e,f as u,e as b}from"../chunks/CI19bRDX.js";import{i as Ue}from"../chunks/CeYVVThO.js";import{c as De,o as Ee}from"../chunks/Cc88vFxA.js";import{f as he,p as _e,c as e,s as o,r as t,d as c,g as r,aR as Ne,n as L,t as ie,a as ye,m as P,j as Qe,a3 as Me,k as ae}from"../chunks/CC-cBgEA.js";import{s as re}from"../chunks/DtWQG8q5.js";import{i as M}from"../chunks/oYNvDJv2.js";import{I as Oe,s as qe,e as Fe,t as Ge}from"../chunks/B0hQvWV2.js";import{a as Re,s as be,r as xe}from"../chunks/CPE7ojsi.js";import{b as ue}from"../chunks/DubRPcAg.js";import{l as We,b as Ve,p as Be,s as Xe,a as Ce}from"../chunks/BHjHH8n1.js";import{f as Ze}from"../chunks/B37JQBsy.js";import{A as Je}from"../chunks/D8uWt282.js";import{U as Ke}from"../chunks/B6MkXCxC.js";import{Q as Te}from"../chunks/CzU3emUf.js";import{H as Ye}from"../chunks/DnVIeHlM.js";import{G as He}from"../chunks/CPSh-hdw.js";import{b as et}from"../chunks/DtYL2sJG.js";import{a as tt}from"../chunks/BopDJUtp.js";import{S as rt}from"../chunks/DsZ2n2Vk.js";import{S as Se}from"../chunks/YAwP_J4U.js";import{S as je}from"../chunks/DI7ds4rN.js";import{L as ot}from"../chunks/PDyLZ_rv.js";import{U as at}from"../chunks/CW7jBEae.js";import{E as it}from"../chunks/BMbyy01g.js";import{q as st}from"../chunks/BSX_ZBdj.js";import{a as lt}from"../chunks/C-p41Btd.js";import{e as nt}from"../chunks/Bej7o0Ow.js";import"../chunks/wsPmswU7.js";import{h as fe}from"../chunks/B55X0rAM.js";import{R as dt}from"../chunks/DneJMtl5.js";import{S as ct}from"../chunks/BxEKxVAH.js";import{P as Ie}from"../chunks/3NDLYjDg.js";import{X as vt}from"../chunks/CiL9a3zz.js";function mt(Z,m){const x=We(m,["children","$$slots","$$events","$$legacy"]);const C=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];Oe(Z,Ve({name:"zoom-in"},()=>x,{get iconNode(){return C},children:(h,S)=>{var j=Pe(),_=he(j);qe(_,m,"default",{}),p(h,j)},$$slots:{default:!0}}))}var pt=u('<img class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"/>'),ut=u('<div class="flex items-center justify-center h-full text-stone-300"><!></div>'),ft=u('<div class="group bg-white rounded-2xl border border-stone-200 shadow-sm overflow-hidden hover:shadow-lg transition-all duration-300 relative"><div class="h-48 w-full bg-stone-100 relative overflow-hidden"><!> <div class="absolute bottom-3 right-3 bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-full text-xs font-bold text-[#304743] shadow-sm flex items-center gap-1.5"><!> </div></div> <div class="p-6"><h3 class="font-serif font-bold text-xl text-[#304743] mb-2"> </h3> <p> </p> <div class="flex items-center justify-between pt-4 border-t border-stone-100"><button class="text-xs font-bold text-stone-400 hover:text-[#4A7C74] flex items-center gap-1 transition-colors"><!> </button> <button class="p-2 bg-stone-50 rounded-lg text-stone-400 hover:text-[#304743] hover:bg-stone-100 transition-colors" title="Generate Digital Heirloom QR"><!></button></div></div> <div class="absolute top-3 left-3 opacity-0 group-hover:opacity-100 transition-opacity"><div class="bg-[#4A7C74] text-white text-[10px] font-bold px-2 py-1 rounded-md shadow-lg flex items-center gap-1"><!> SENTIMENTAL</div></div></div>');function bt(Z,m){_e(m,!0);let x=Ne(!1);var C=ft(),h=e(C),S=e(h);{var j=l=>{var d=pt();ie(()=>{be(d,"src",m.heirloom.image),be(d,"alt",m.heirloom.name)}),p(l,d)},_=l=>{var d=ut(),k=e(d);He(k,{size:48}),t(d),p(l,d)};M(S,l=>{m.heirloom.image?l(j):l(_,!1)})}var O=o(S,2),y=e(O);Ke(y,{size:12,class:"text-[#4A7C74]"});var s=o(y);t(O),t(h);var J=o(h,2),q=e(J),K=e(q,!0);t(q);var g=o(q,2);let $;var w=e(g,!0);t(g);var F=o(g,2),I=e(F);I.__click=()=>c(x,!r(x));var G=e(I);mt(G,{size:14});var oe=o(G);t(I);var W=o(I,2);W.__click=()=>m.onPrintQr?.(m.heirloom.id);var Y=e(W);Te(Y,{size:16}),t(W),t(F),t(J);var ee=o(J,2),V=e(ee),a=e(V);Ye(a,{size:10,class:"fill-current"}),L(),t(V),t(ee),t(C),ie(()=>{re(s,` For ${m.heirloom.recipient??""}`),re(K,m.heirloom.name),$=Re(g,1,"text-sm text-muted-foreground leading-relaxed mb-4 transition-[max-height] duration-500 ease-in-out",null,$,{"line-clamp-3":!r(x)}),re(w,m.heirloom.story),re(oe,` ${r(x)?"Hide Story":"View Story"}`)}),p(Z,C),ye()}$e(["click"]);var gt=u('<div class="absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center text-white"><div class="relative"><div class="absolute inset-0 bg-indigo-500 blur-xl opacity-50 animate-pulse"></div> <!></div> <p class="mt-4 font-mono text-sm uppercase tracking-widest text-indigo-300 animate-pulse">Analyzing Artifact...</p></div>'),xt=u('<div class="absolute bottom-4 left-1/2 -translate-x-1/2 bg-emerald-500/90 text-white px-4 py-2 rounded-full flex items-center gap-2 shadow-lg backdrop-blur-md animate-in slide-in-from-bottom-4 fade-in duration-500"><!> <span class="text-xs font-bold uppercase tracking-wide">Analysis Complete</span></div> <button class="absolute top-2 right-2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors" title="Change Image"><!></button>',1),ht=u('<div class="relative aspect-video w-full max-w-sm mx-auto rounded-lg overflow-hidden shadow-sm"><img alt="Uploaded heirloom" class="w-full h-full object-cover"/> <!> <!></div>'),_t=u('<div class="py-8 cursor-pointer"><div class="w-16 h-16 bg-indigo-50 text-indigo-500 rounded-2xl flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform duration-300 shadow-sm border border-indigo-100"><!></div> <h3 class="text-sm font-bold text-slate-700 mb-1">Visual Archivist</h3> <p class="text-xs text-slate-400">Drag photo here or click to upload</p> <div class="mt-4 inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-50 text-[10px] font-bold uppercase tracking-wide text-indigo-500"><!> AI Powered</div></div>'),yt=u(`<div class="bg-indigo-50 rounded-xl p-4 border border-indigo-100 animate-in fade-in slide-in-from-top-2"><div class="flex items-start gap-3"><div class="p-2 bg-indigo-100 rounded-lg text-indigo-600"><!></div> <div><h4 class="text-sm font-bold text-indigo-900">Insight Generated</h4> <p class="text-xs text-indigo-700 mt-1">We've identified this item and drafted a description.
                        Review the details below.</p></div></div></div>`),wt=u('<div class="space-y-4"><div><input type="file" accept="image/*" class="hidden"/> <!></div> <!> <div class="pt-4"><!></div></div>');function kt(Z,m){_e(m,!1);let x=Be(m,"imageUrl",12,"");const C=De();let h=P(),S=P(!1),j=P(!1),_=P(!1),O=P("");function y(a){a.preventDefault(),c(S,!0)}function s(){c(S,!1)}function J(a){a.preventDefault(),c(S,!1),a.dataTransfer?.files&&a.dataTransfer.files[0]&&q(a.dataTransfer.files[0])}function q(a){if(!a.type.startsWith("image/"))return;const l=new FileReader;l.onload=d=>{x(d.target?.result),K(a)},l.readAsDataURL(a)}async function K(a){c(j,!0),c(_,!1);try{const l=await tt(a);C("analyze",l),c(_,!0)}catch(l){console.error("Analysis failed",l)}finally{c(j,!1)}}function g(){r(h).click()}Ue();var $=wt(),w=e($),F=e(w);et(F,a=>c(h,a),()=>r(h));var I=o(F,2);{var G=a=>{var l=ht(),d=e(l),k=o(d,2);{var D=U=>{var B=gt(),X=e(B),le=o(e(X),2);ot(le,{size:48,class:"animate-spin relative z-10 text-indigo-400"}),t(X),L(2),t(B),p(U,B)};M(k,U=>{r(j)&&U(D)})}var se=o(k,2);{var ge=U=>{var B=xt(),X=he(B),le=e(X);Se(le,{size:16}),L(2),t(X);var i=o(X,2),n=e(i);at(n,{size:14}),t(i),b("click",i,g),p(U,B)};M(se,U=>{r(_)&&U(ge)})}t(l),ie(()=>be(d,"src",x())),p(a,l)},oe=a=>{var l=_t(),d=e(l),k=e(d);Se(k,{size:32}),t(d);var D=o(d,6),se=e(D);je(se,{size:10}),L(),t(D),t(l),b("click",l,g),p(a,l)};M(I,a=>{x()?a(G):a(oe,!1)})}t(w);var W=o(w,2);{var Y=a=>{var l=yt(),d=e(l),k=e(d),D=e(k);je(D,{size:18}),t(k),L(2),t(d),t(l),p(a,l)};M(W,a=>{r(_)&&a(Y)})}var ee=o(W,2),V=e(ee);rt(V,{context:"heirloom",placeholder:"Tell the story of this item...",label:"Provenance",get value(){return r(O)},set value(a){c(O,a)},$$legacy:!0}),t(ee),t($),ie(()=>Re(w,1,`relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 overflow-hidden group
        ${r(S)?"border-indigo-500 bg-indigo-50/50":"border-stone-200 hover:border-indigo-300 hover:bg-stone-50"}`)),b("change",F,a=>a.currentTarget.files&&q(a.currentTarget.files[0])),b("dragover",w,y),b("dragleave",w,s),b("drop",w,J),p(Z,$),ye()}var At=u('<div class="relative group"><!> <button class="absolute top-2 right-2 p-2 bg-white/90 text-rose-600 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-all hover:bg-rose-50" title="Remove"><!></button></div>'),zt=u('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"><!> <button class="border-2 border-dashed border-stone-200 rounded-2xl flex flex-col items-center justify-center text-stone-400 hover:border-[#4A7C74] hover:text-[#4A7C74] hover:bg-[#4A7C74]/5 transition-all min-h-[350px] group"><div class="w-16 h-16 rounded-full bg-stone-100 group-hover:bg-[#4A7C74]/10 flex items-center justify-center mb-4 transition-colors"><!></div> <span class="font-bold">Catalog a New Treasure</span></button></div>'),Ct=u('<div class="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm print:bg-white print:p-0"><div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden print:shadow-none print:w-full print:max-w-none"><div class="p-8 text-center print:text-left print:p-0"><div class="mb-4 print:hidden"><span class="text-xs font-bold uppercase tracking-widest text-[#4A7C74] rounded-full bg-[#4A7C74]/10 px-3 py-1">Printable Label</span></div> <div class="border-2 border-dashed border-stone-300 rounded-xl p-6 bg-stone-50 print:border-4 print:border-black print:bg-white print:rounded-none"><h2 class="font-serif font-bold text-2xl text-slate-900 mb-1"> </h2> <p class="text-xs text-stone-500 uppercase tracking-wide font-bold mb-4"> </p> <div class="bg-white p-2 rounded-lg inline-block shadow-sm mb-4 print:shadow-none"><img alt="QR Code" class="w-48 h-48 mx-auto"/></div> <p class="text-xs text-stone-400 font-mono"> </p></div> <div class="mt-8 flex gap-3 justify-center print:hidden"><button class="px-5 py-2 rounded-xl font-bold text-stone-500 hover:bg-stone-100">Close</button> <button class="px-5 py-2 rounded-xl font-bold bg-[#304743] text-white hover:bg-[#20302d] flex items-center gap-2"><!> Print Label</button></div></div></div></div>'),St=u('<div class="mt-2 text-center"><span class="text-xs text-stone-400">or</span></div> <div class="mt-2"><label class="block text-xs font-bold uppercase text-gray-500 mb-1">Or paste a URL</label> <input type="text" class="w-full px-4 py-3 rounded-xl border border-gray-200 text-sm" placeholder="https://..."/></div>',1),jt=u(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"><div class="bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden max-h-[90vh] overflow-y-auto"><div class="p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50"><h3 class="font-serif font-bold text-2xl text-slate-800">Add Heirloom</h3> <button class="text-gray-400 hover:text-gray-600">Close</button></div> <div class="p-6 space-y-4"><div><label class="block text-xs font-bold uppercase text-gray-500 mb-1">Item Name</label> <input type="text" class="w-full px-4 py-3 rounded-xl border border-gray-200" placeholder="e.g. Grandma's Ring"/></div> <div><label class="block text-xs font-bold uppercase text-gray-500 mb-1">Intended Recipient</label> <input type="text" class="w-full px-4 py-3 rounded-xl border border-gray-200" placeholder="Who should have this?"/></div> <div><label class="block text-xs font-bold uppercase text-gray-500 mb-1">The Story</label> <textarea class="w-full px-4 py-3 rounded-xl border border-gray-200 h-32" placeholder="Why is this meaningful? Where did it come from?"></textarea></div> <div><!> <!></div></div> <div class="p-6 bg-gray-50 flex justify-end gap-3"><button class="px-6 py-2 rounded-xl font-bold text-gray-500 hover:bg-gray-200">Cancel</button> <button class="px-6 py-2 rounded-xl font-bold bg-[#304743] text-white hover:bg-[#20302d] disabled:opacity-50">Save Item</button></div></div></div>`),It=u(`<div class="max-w-7xl mx-auto p-8 animate-in fade-in duration-500"><div class="text-center mb-12"><div class="inline-flex items-center justify-center p-4 bg-amber-100 text-amber-800 rounded-full mb-6"><!></div> <h1 class="font-serif font-bold text-4xl text-[#304743] mb-4">Heirloom Stories</h1> <p class="text-lg text-muted-foreground max-w-2xl mx-auto">Objects carry stories. Document the history and meaning behind your
            most treasured possessions so they remain more than just "things."</p></div> <div class="max-w-3xl mx-auto mb-12"><!></div> <div class="flex flex-col md:flex-row gap-4 justify-between items-center mb-8"><div class="relative w-full md:w-96"><!> <input type="text" placeholder="Search by item, story, or recipient..." class="w-full pl-10 pr-4 py-3 rounded-2xl border border-stone-200 focus:border-[#4A7C74] focus:ring-0 shadow-sm"/></div> <button class="bg-[#304743] leading-none text-white px-6 py-3 rounded-2xl font-bold flex items-center gap-2 shadow-lg hover:shadow-xl hover:bg-[#20302d] transition-all"><!> Add Heirloom</button></div> <!> <!> <!></div>`);function dr(Z,m){_e(m,!1);const x=()=>Ce(nt,"$estateProfile",h),C=()=>Ce(fe,"$heirloomStore",h),[h,S]=Xe();Ee(()=>{fe.update(i=>{let n=!1;const f=i.map(v=>v.image&&v.image.includes("unsplash.com")?(n=!0,{...v,image:O(v.name||"",v.story||"")}):v);return n?f:i})});function j(i){const n=i.detail;ae(s,r(s).name=n.name),ae(s,r(s).story=n.description),!r(s).image||r(s).image.startsWith("blob:")}const _=[{keywords:["watch","clock","timepiece","rolex","omega","pocket watch"],url:"/images/heirlooms/heirloom_watch_placeholder_1767552136426.png"},{keywords:["book","bible","journal","diary","letter","paper","document"],url:"/images/heirlooms/heirloom_books_placeholder_1767552150155.png"},{keywords:["ring","necklace","gold","silver","jewelry","locket","diamond","pendant","bracelet"],url:"/images/heirlooms/heirloom_jewelry_placeholder_1767552162926.png"},{keywords:["camera","photo","leica","canon","nikon","lens","film"],url:"/images/heirlooms/heirloom_camera_placeholder_1767552182401.png"},{keywords:["vase","ceramic","bowl","plate","china","porcelain","dish","pottery"],url:"/images/heirlooms/heirloom_vase_placeholder_retry_1767552227926.png"},{keywords:["tool","hammer","wrench","saw","knife","blade"],url:"/images/heirlooms/heirloom_tools_placeholder_1767552195001.png"},{keywords:["music","guitar","violin","piano","instrument"],url:"/images/heirlooms/heirloom_instrument_placeholder_1767552207664.png"}];function O(i,n){const f=(i+" "+n).toLowerCase(),v=_.find(R=>R.keywords.some(A=>f.includes(A)));return v?v.url:_[Math.floor(Math.random()*_.length)].url}let y=P(!1),s=P({image:""});function J(){r(s).name&&(fe.update(i=>[{id:crypto.randomUUID(),name:r(s).name||"Unknown Treasure",recipient:r(s).recipient||"Undecided",story:r(s).story||"",image:r(s).image||O(r(s).name||"",r(s).story||"")},...i]),c(y,!1),c(s,{image:""}))}function q(i){confirm("Remove this heirloom from the registry?")&&fe.update(n=>n.filter(f=>f.id!==i))}let K=P(!1),g=P(null),$=P("");function w(i){c(g,i),c(K,!0);const n=`${window.location.origin}/modules/heirlooms?id=${i.id}`;c($,`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(n)}`),st.generateAssetQR({id:crypto.randomUUID(),assetId:i.id,assetName:i.name,assetType:"Heirloom",location:"Registry"}),lt.logEvent({module:"Heirlooms",action:"CREATE",entityType:"QR Label",entityId:i.id,entityName:i.name,userContext:x().ownerName||"User"})}function F(){window.print()}Ue();var I=It(),G=e(I),oe=e(G),W=e(oe);He(W,{size:48}),t(oe),L(4),t(G);var Y=o(G,2),ee=e(Y);Je(ee,{context:"heirlooms",get promptPool(){return dt.heirlooms.story}}),t(Y);var V=o(Y,2),a=e(V),l=e(a);ct(l,{size:18,class:"absolute left-3 top-1/2 -translate-y-1/2 text-stone-400"}),L(2),t(a);var d=o(a,2),k=e(d);Ie(k,{size:20}),L(),t(d),t(V);var D=o(V,2);{var se=i=>{it(i,{type:"heirlooms",onAdd:()=>c(y,!0)})},ge=i=>{var n=zt(),f=e(n);Fe(f,1,C,E=>E.id,(E,T)=>{var H=At(),N=e(H);bt(N,{get heirloom(){return r(T)},onPrintQr:()=>w(r(T))});var Q=o(N,2),te=e(Q);vt(te,{size:16}),t(Q),t(H),b("click",Q,()=>q(r(T).id)),Ge(1,H,()=>Ze,()=>({duration:400})),p(E,H)});var v=o(f,2),R=e(v),A=e(R);Ie(A,{size:32}),t(R),L(2),t(v),t(n),b("click",v,()=>c(y,!0)),p(i,n)};M(D,i=>{C().length===0?i(se):i(ge,!1)})}var U=o(D,2);{var B=i=>{var n=Ct(),f=e(n),v=e(f),R=o(e(v),2),A=e(R),E=e(A,!0);t(A);var T=o(A,2),H=e(T);t(T);var N=o(T,2),Q=e(N);t(N);var te=o(N,2),ce=e(te);t(te),t(R);var ne=o(R,2),ve=e(ne),de=o(ve,2),me=e(de);Te(me,{size:18}),L(),t(de),t(ne),t(v),t(f),t(n),ie(pe=>{re(E,r(g).name),re(H,`For ${r(g).recipient??""}`),be(Q,"src",r($)),re(ce,`ID: ${pe??""} // Scan to view story`)},[()=>r(g).id.split("-")[0]]),b("click",ve,()=>c(K,!1)),b("click",de,F),p(i,n)};M(U,i=>{r(K)&&r(g)&&i(B)})}var X=o(U,2);{var le=i=>{var n=jt(),f=e(n),v=e(f),R=o(e(v),2);t(v);var A=o(v,2),E=e(A),T=o(e(E),2);xe(T),t(E);var H=o(E,2),N=o(e(H),2);xe(N),t(H);var Q=o(H,2),te=o(e(Q),2);Qe(te),t(Q);var ce=o(Q,2),ne=e(ce);{let z=Me(()=>r(s).image||"");kt(ne,{get imageUrl(){return r(z)},$$events:{analyze:j}})}var ve=o(ne,2);{var de=z=>{var ke=St(),Ae=o(he(ke),2),ze=o(e(Ae),2);xe(ze),t(Ae),ue(ze,()=>r(s).image,Le=>ae(s,r(s).image=Le)),p(z,ke)};M(ve,z=>{r(s).image||z(de)})}t(ce),t(A);var me=o(A,2),pe=e(me),we=o(pe,2);t(me),t(f),t(n),ie(()=>we.disabled=!r(s).name),b("click",R,()=>c(y,!1)),ue(T,()=>r(s).name,z=>ae(s,r(s).name=z)),ue(N,()=>r(s).recipient,z=>ae(s,r(s).recipient=z)),ue(te,()=>r(s).story,z=>ae(s,r(s).story=z)),b("click",pe,()=>c(y,!1)),b("click",we,J),p(i,n)};M(X,i=>{r(y)&&i(le)})}t(I),b("click",d,()=>c(y,!0)),p(Z,I),ye(),S()}export{dr as component};
