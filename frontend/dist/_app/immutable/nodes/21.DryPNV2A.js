import{c as nt,a as _,f as w,e as U}from"../chunks/CI19bRDX.js";import{i as me}from"../chunks/CeYVVThO.js";import{o as fe}from"../chunks/Cc88vFxA.js";import{f as dt,p as xe,l as _e,b as ge,t as h,c as a,s as i,g as t,a as be,m as D,d as u,r as e,n as L,i as At,u as d}from"../chunks/CC-cBgEA.js";import{s as c}from"../chunks/DtWQG8q5.js";import{i as j}from"../chunks/oYNvDJv2.js";import{I as Nt,s as Rt,e as lt,i as Ct,t as he}from"../chunks/B0hQvWV2.js";import{c as we}from"../chunks/Dp8rxJLH.js";import{d as Dt,r as Ee,a as Lt,s as Te}from"../chunks/CPE7ojsi.js";import{b as $e}from"../chunks/DubRPcAg.js";import{a as y}from"../chunks/C-p41Btd.js";import{s as ye}from"../chunks/B37JQBsy.js";import{H as kt}from"../chunks/BGtcuyrl.js";import{S as Se}from"../chunks/BxEKxVAH.js";import{D as Ae}from"../chunks/B1hSKyAo.js";import{F as Ce}from"../chunks/BnJm4biV.js";import{T as De}from"../chunks/BtEVtpAO.js";import{S as Le}from"../chunks/oeSExbPz.js";import{l as Mt,b as Pt}from"../chunks/BHjHH8n1.js";import{X as ke}from"../chunks/CiL9a3zz.js";import{P as Ne}from"../chunks/3NDLYjDg.js";function Re(k,E){const p=Mt(E,["children","$$slots","$$events","$$legacy"]);const m=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M12 18v-6"}],["path",{d:"m9 15 3 3 3-3"}]];Nt(k,Pt({name:"file-down"},()=>p,{get iconNode(){return m},children:(x,g)=>{var v=nt(),b=dt(v);Rt(b,E,"default",{}),_(x,v)},$$slots:{default:!0}}))}function Me(k,E){const p=Mt(E,["children","$$slots","$$events","$$legacy"]);const m=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];Nt(k,Pt({name:"square-pen"},()=>p,{get iconNode(){return m},children:(x,g)=>{var v=nt(),b=dt(v);Rt(b,E,"default",{}),_(x,v)},$$slots:{default:!0}}))}var Pe=w('<div class="px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-bold text-sm"> </div>'),Oe=w("<option> </option>"),Ue=w('<div class="bg-white rounded-2xl border border-slate-200 shadow-sm p-12 text-center"><div class="p-4 bg-slate-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"><!></div> <h3 class="font-bold text-lg text-slate-700 mb-2">No Activity Found</h3> <p class="text-slate-500"> </p></div>'),je=w('<div class="text-sm"><span class="font-medium text-slate-700"> </span> <span class="text-slate-500 line-through ml-2"> </span> <span class="text-slate-400 mx-2">→</span> <span class="text-slate-900 font-medium"> </span></div>'),ze=w('<div class="mt-3 p-3 bg-slate-50 rounded-lg border border-slate-100"><div class="text-xs font-bold uppercase tracking-wider text-slate-400 mb-2">Changes</div> <div class="space-y-1.5"></div></div>'),Fe=w('<div class="bg-white rounded-xl border border-slate-200 shadow-sm p-5 hover:shadow-md transition-all group"><div class="flex items-start gap-4"><div class="shrink-0"><div><!></div></div> <div class="flex-1 min-w-0"><div class="flex items-start justify-between gap-4 mb-2"><div><div class="flex items-center gap-2 flex-wrap"><span class="font-bold text-slate-900"> </span> <span class="text-slate-400">•</span> <span class="text-sm text-slate-500"> </span></div> <div class="flex items-center gap-2 mt-1"><span> </span> <span class="text-xs text-slate-400"> </span></div></div> <div class="text-right shrink-0"><div class="text-sm font-medium text-slate-600"> </div> <div class="text-xs text-slate-400 mt-0.5"> </div></div></div> <!></div></div></div>'),Ie=w(`<div class="bg-slate-50 rounded-xl p-4 text-center text-sm text-slate-600">Showing <span class="font-bold text-slate-900"> </span> of <span class="font-bold text-slate-900"> </span> total
            events</div>`),Ge=w('<div class="max-w-6xl mx-auto p-6 md:p-8 space-y-8 animate-in fade-in duration-500"><div class="flex flex-col md:flex-row md:items-center justify-between gap-6"><div><h1 class="font-serif font-bold text-3xl text-slate-900 flex items-center gap-3"><div class="p-2.5 bg-indigo-100 rounded-xl text-indigo-700"><!></div> Activity Log</h1> <p class="text-slate-500 mt-2 text-lg">Complete audit trail of all changes across your estate plan.</p></div> <div class="flex items-center gap-3"><!></div></div> <div class="bg-white rounded-2xl border border-slate-200 shadow-sm p-6 space-y-4"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="relative"><!> <input type="text" placeholder="Search activities..." class="w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"/></div> <select class="px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"></select> <select class="px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"><option>All Actions</option><option>Create</option><option>Update</option><option>Delete</option><option>Export</option><option>Settings Change</option></select></div> <div class="flex flex-wrap items-center gap-3 pt-4 border-t border-slate-100"><button class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors">Reset Filters</button> <div class="flex-1"></div> <button class="px-4 py-2 text-sm font-bold text-indigo-600 bg-indigo-50 hover:bg-indigo-100 rounded-lg transition-colors flex items-center gap-2"><!> Export JSON</button> <button class="px-4 py-2 text-sm font-bold text-emerald-600 bg-emerald-50 hover:bg-emerald-100 rounded-lg transition-colors flex items-center gap-2"><!> Export CSV</button> <button class="px-4 py-2 text-sm font-bold text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors flex items-center gap-2"><!> Clear Log</button></div></div> <div class="space-y-4"><!></div> <!></div>');function va(k,E){xe(E,!1);let p=D([]),m=D([]),x=D(""),g=D("all"),v=D("all"),b=D(0);const Ot=["all","Asset Manager","Subscriptions","Document Vault","Pet Care","Funeral Planning","Digital Guardian","Family Hub","Estate Profile"],vt={CREATE:"bg-green-100 text-green-700 border-green-200",UPDATE:"bg-blue-100 text-blue-700 border-blue-200",DELETE:"bg-red-100 text-red-700 border-red-200",EXPORT:"bg-purple-100 text-purple-700 border-purple-200",SETTINGS_CHANGE:"bg-amber-100 text-amber-700 border-amber-200"},Ut={CREATE:Ne,UPDATE:Me,DELETE:ke,EXPORT:Re,SETTINGS_CHANGE:Le};fe(()=>{u(p,y.getAll()),u(m,t(p)),u(b,y.getTodayCount())});function jt(s){const r=new Date(s),n=new Date().getTime()-r.getTime(),o=Math.floor(n/1e3),f=Math.floor(o/60),S=Math.floor(f/60),A=Math.floor(S/24);return o<60?"Just now":f<60?`${f}m ago`:S<24?`${S}h ago`:A<7?`${A}d ago`:r.toLocaleDateString()}function zt(s){return new Date(s).toLocaleString()}function Ft(){const s=y.exportAsJSON(),r=new Blob([s],{type:"application/json"}),l=URL.createObjectURL(r),n=document.createElement("a");n.href=l,n.download=`activity-log-${new Date().toISOString().split("T")[0]}.json`,n.click(),URL.revokeObjectURL(l)}function It(){const s=y.exportAsCSV(),r=new Blob([s],{type:"text/csv"}),l=URL.createObjectURL(r),n=document.createElement("a");n.href=l,n.download=`activity-log-${new Date().toISOString().split("T")[0]}.csv`,n.click(),URL.revokeObjectURL(l)}function Gt(){confirm("Are you sure you want to clear the entire activity log? This action cannot be undone.")&&(y.clear(),u(p,[]),u(m,[]),u(b,0))}function Ht(){u(x,""),u(g,"all"),u(v,"all")}_e(()=>(t(p),t(g),t(v),t(x),y),()=>{let s=t(p);t(g)!=="all"&&(s=s.filter(r=>r.module===t(g))),t(v)!=="all"&&(s=s.filter(r=>r.action===t(v))),t(x)&&(s=y.search(t(x))),u(m,s)}),ge(),me();var z=Ge(),F=a(z),I=a(F),ct=a(I),pt=a(ct),Vt=a(pt);kt(Vt,{class:"w-8 h-8"}),e(pt),L(),e(ct),L(2),e(I);var ut=i(I,2),Jt=a(ut);{var Xt=s=>{var r=Pe(),l=a(r);e(r),h(()=>c(l,`${t(b)??""}
                    ${t(b)===1?"event":"events"} today`)),_(s,r)};j(Jt,s=>{t(b)>0&&s(Xt)})}e(ut),e(F);var G=i(F,2),H=a(G),V=a(H),mt=a(V);Se(mt,{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"});var ft=i(mt,2);Ee(ft),e(V);var N=i(V,2);h(()=>{t(g),At(()=>{})}),lt(N,5,()=>Ot,Ct,(s,r)=>{var l=Oe(),n=a(l,!0);e(l);var o={};h(()=>{c(n,t(r)==="all"?"All Modules":t(r)),o!==(o=t(r)==="all"?"all":t(r))&&(l.value=(l.__value=t(r)==="all"?"all":t(r))??"")}),_(s,l)}),e(N);var J=i(N,2);h(()=>{t(v),At(()=>{})});var X=a(J);X.value=X.__value="all";var q=i(X);q.value=q.__value="CREATE";var B=i(q);B.value=B.__value="UPDATE";var Q=i(B);Q.value=Q.__value="DELETE";var K=i(Q);K.value=K.__value="EXPORT";var xt=i(K);xt.value=xt.__value="SETTINGS_CHANGE",e(J),e(H);var _t=i(H,2),gt=a(_t),R=i(gt,4),qt=a(R);Ae(qt,{size:16}),L(),e(R);var M=i(R,2),Bt=a(M);Ce(Bt,{size:16}),L(),e(M);var W=i(M,2),Qt=a(W);De(Qt,{size:16}),L(),e(W),e(_t),e(G);var Y=i(G,2),Kt=a(Y);{var Wt=s=>{var r=Ue(),l=a(r),n=a(l);kt(n,{class:"w-8 h-8 text-slate-400"}),e(l);var o=i(l,4),f=a(o,!0);e(o),e(r),h(()=>c(f,t(x)||t(g)!=="all"||t(v)!=="all"?"Try adjusting your filters":"Start making changes to see your activity log")),_(s,r)},Yt=s=>{var r=nt(),l=dt(r);lt(l,1,()=>t(m),n=>n.id,(n,o)=>{var f=Fe(),S=a(f),A=a(S),Z=a(A),ee=a(Z);we(ee,()=>Ut[t(o).action],(T,$)=>{$(T,{size:18})}),e(Z),e(A);var bt=i(A,2),tt=a(bt),et=a(tt),at=a(et),st=a(at),ae=a(st,!0);e(st);var ht=i(st,4),se=a(ht,!0);e(ht),e(at);var wt=i(at,2),P=a(wt),oe=a(P,!0);e(P);var Et=i(P,2),re=a(Et,!0);e(Et),e(wt),e(et);var Tt=i(et,2),O=a(Tt),ie=a(O,!0);e(O);var $t=i(O,2),le=a($t);e($t),e(Tt),e(tt);var ne=i(tt,2);{var de=T=>{var $=ze(),yt=i(a($),2);lt(yt,5,()=>(t(o),d(()=>t(o).changes)),Ct,(ve,C)=>{var ot=je(),rt=a(ot),ce=a(rt);e(rt);var it=i(rt,2),pe=a(it,!0);e(it);var St=i(it,4),ue=a(St,!0);e(St),e(ot),h(()=>{c(ce,`${t(C),d(()=>t(C).field)??""}:`),c(pe,(t(C),d(()=>t(C).oldValue||"(empty)"))),c(ue,(t(C),d(()=>t(C).newValue||"(empty)")))}),_(ve,ot)}),e(yt),e($),_(T,$)};j(ne,T=>{t(o),d(()=>t(o).changes&&t(o).changes.length>0)&&T(de)})}e(bt),e(S),e(f),h((T,$)=>{Lt(Z,1,`p-2.5 rounded-lg border ${t(o),d(()=>vt[t(o).action])??""}`),c(ae,(t(o),d(()=>t(o).entityName))),c(se,(t(o),d(()=>t(o).module))),Lt(P,1,`text-xs font-bold uppercase tracking-wider px-2 py-0.5 rounded-full ${t(o),d(()=>vt[t(o).action])??""}`),c(oe,(t(o),d(()=>t(o).action))),c(re,(t(o),d(()=>t(o).entityType))),Te(O,"title",T),c(ie,$),c(le,`by ${t(o),d(()=>t(o).userContext)??""}`)},[()=>(t(o),d(()=>zt(t(o).timestamp))),()=>(t(o),d(()=>jt(t(o).timestamp)))]),he(3,f,()=>ye),_(n,f)}),_(s,r)};j(Kt,s=>{t(m),d(()=>t(m).length===0)?s(Wt):s(Yt,!1)})}e(Y);var Zt=i(Y,2);{var te=s=>{var r=Ie(),l=i(a(r)),n=a(l,!0);e(l);var o=i(l,2),f=a(o,!0);e(o),L(),e(r),h(()=>{c(n,(t(m),d(()=>t(m).length))),c(f,(t(p),d(()=>t(p).length)))}),_(s,r)};j(Zt,s=>{t(p),d(()=>t(p).length>0)&&s(te)})}e(z),$e(ft,()=>t(x),s=>u(x,s)),Dt(N,()=>t(g),s=>u(g,s)),Dt(J,()=>t(v),s=>u(v,s)),U("click",gt,Ht),U("click",R,Ft),U("click",M,It),U("click",W,Gt),_(k,z),be()}export{va as component};
