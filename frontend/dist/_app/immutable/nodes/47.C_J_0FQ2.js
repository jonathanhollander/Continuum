import{f as P,e as k,a as L}from"../chunks/CI19bRDX.js";import{i as Be}from"../chunks/CeYVVThO.js";import{o as He}from"../chunks/Cc88vFxA.js";import{I as Oe,p as Ge,c as t,r as e,s as r,g as a,m as R,t as B,u as d,a4 as g,d as c,a as Ve,n as z,l as Te,b as Xe,f as Ye,i as We,k as ie,j as Ze}from"../chunks/CC-cBgEA.js";import{s as p}from"../chunks/DtWQG8q5.js";import{i as le}from"../chunks/oYNvDJv2.js";import{t as $e,e as je,i as Je}from"../chunks/B0hQvWV2.js";import{a as qe,s as Ke,r as Pe,d as Qe}from"../chunks/CPE7ojsi.js";import{b as Ne}from"../chunks/DubRPcAg.js";import{p as Ae,s as et,a as tt}from"../chunks/BHjHH8n1.js";import{s as at,b as rt,f as ot}from"../chunks/B37JQBsy.js";import{C as Fe}from"../chunks/nIs8KkS0.js";import{C as st}from"../chunks/DS3VKAhf.js";import{C as it}from"../chunks/Bbyota6m.js";import{E as lt}from"../chunks/DjKmT8no.js";import{E as nt}from"../chunks/BMbyy01g.js";import{e as dt}from"../chunks/Bej7o0Ow.js";import{a as Ue}from"../chunks/C-p41Btd.js";import{g as ct,s as vt}from"../chunks/lbPixqMI.js";import{R as ut}from"../chunks/DZ81D-bc.js";import{P as Re}from"../chunks/3NDLYjDg.js";import{T as pt}from"../chunks/EsZUiUJI.js";import{F as bt}from"../chunks/DKU5A29D.js";import{P as ft}from"../chunks/BI2CPFpn.js";import{X as ze}from"../chunks/CiL9a3zz.js";import{F as xt}from"../chunks/BnJm4biV.js";import{P as mt}from"../chunks/KyON1iGE.js";import{D as gt}from"../chunks/B1hSKyAo.js";function _t(G,_,i,te=i){_.addEventListener("input",()=>{te(_[G])}),Oe(()=>{var A=i();if(_[G]!==A)if(A==null){var X=_[G];te(X)}else _[G]=A+""})}var ht=P('<a target="_blank" class="inline-flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-700 hover:underline"><!> Go to Account Management</a>'),yt=P('<div class="text-xs text-slate-500 italic bg-white p-2 rounded border border-slate-100"> </div>'),wt=P('<div class="border-t border-slate-100 bg-slate-50/50 p-4"><div class="flex items-start gap-4"><div class="p-2 bg-red-50 text-red-600 rounded-lg shrink-0"><!></div> <div class="flex-1 space-y-3"><div><h4 class="text-xs font-bold uppercase tracking-wider text-slate-500 mb-1">Cancellation Protocol</h4> <p class="text-sm text-slate-700 leading-relaxed"> </p></div> <!> <!> <div class="pt-4 border-t border-slate-100 flex gap-3"><button class="flex-1 py-2.5 bg-indigo-600 text-white rounded-lg text-sm font-bold shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-2"><!> Generate Formal Letter</button></div></div></div></div>'),St=P('<div class="bg-white rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden"><div class="p-4 flex items-center justify-between cursor-pointer"><div class="flex items-center gap-4"><div class="w-10 h-10 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 font-bold shrink-0"> </div> <div><h3 class="font-bold text-slate-800"> </h3> <div class="flex items-center gap-2 text-xs text-slate-500"><!> <span> </span> <span>â€¢</span> <!> <span> </span></div></div></div> <div class="flex items-center gap-6"><div class="text-right hidden sm:block"><div class="font-bold text-slate-800"> </div> <div class="text-xs text-slate-500 uppercase tracking-wide"> </div></div> <span> </span></div></div> <!></div>');function kt(G,_){Ge(_,!1);let i=Ae(_,"sub",8);Ae(_,"onCancel",8);let te=Ae(_,"onGenerateLetter",8),A=R(!1);const X={Easy:"bg-emerald-100 text-emerald-700",Medium:"bg-amber-100 text-amber-700",Hard:"bg-red-100 text-red-700"};Be();var Y=St(),n=t(Y),C=t(n),o=t(C),M=t(o,!0);e(o);var ae=r(o,2),V=t(ae),_e=t(V,!0);e(V);var ne=r(V,2),he=t(ne);Fe(he,{class:"w-3 h-3"});var de=r(he,2),ye=t(de,!0);e(de);var ce=r(de,4);st(ce,{class:"w-3 h-3"});var we=r(ce,2),De=t(we);e(we),e(ne),e(ae),e(C);var Se=r(C,2),W=t(Se),Z=t(W),ve=t(Z,!0);e(Z);var ue=r(Z,2),ke=t(ue);e(ue),e(W);var pe=r(W,2),be=t(pe);e(pe),e(Se),e(n);var Ie=r(n,2);{var Ce=J=>{var q=wt(),K=t(q),fe=t(K),Le=t(fe);it(Le,{class:"w-5 h-5"}),e(fe);var Me=r(fe,2),s=t(Me),l=r(t(s),2),v=t(l,!0);e(l),e(s);var x=r(s,2);{var I=b=>{var f=ht(),w=t(f);lt(w,{class:"w-4 h-4"}),z(),e(f),B(()=>Ke(f,"href",(g(i()),d(()=>i().loginUrl)))),L(b,f)};le(x,b=>{g(i()),d(()=>i().loginUrl)&&b(I)})}var E=r(x,2);{var N=b=>{var f=yt(),w=t(f);e(f),B(()=>p(w,`Note: ${g(i()),d(()=>i().notes)??""}`)),L(b,f)};le(E,b=>{g(i()),d(()=>i().notes)&&b(N)})}var h=r(E,2),U=t(h),y=t(U);Fe(y,{size:14}),z(),e(U),e(h),e(Me),e(K),e(q),B(()=>p(v,(g(i()),d(()=>i().cancellationInstructions)))),k("click",U,function(...b){te()?.apply(this,b)}),$e(3,q,()=>at),L(J,q)};le(Ie,J=>{a(A)&&J(Ce)})}e(Y),B((J,q,K)=>{p(M,J),p(_e,(g(i()),d(()=>i().name))),p(ye,(g(i()),d(()=>i().paymentMethod))),p(De,`Next: ${q??""}`),p(ve,K),p(ke,`/${g(i()),d(()=>i().cycle)??""}`),qe(pe,1,`px-2.5 py-1 rounded-full text-xs font-bold ${g(i()),d(()=>X[i().difficulty]||"bg-slate-100 text-slate-600")??""}`),p(be,`${g(i()),d(()=>i().difficulty)??""} Cancel`)},[()=>(g(i()),d(()=>i().name.charAt(0))),()=>(g(i()),d(()=>new Date(i().nextBilling).toLocaleDateString())),()=>(g(i()),d(()=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(i().cost)))]),k("click",n,()=>c(A,!a(A))),L(G,Y),Ve()}var Ct=P('<div class="relative group"><!> <div class="absolute top-3 right-2 flex gap-1 bg-white/50 backdrop-blur-sm rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity"><button class="p-1.5 hover:bg-blue-50 text-slate-400 hover:text-blue-600 rounded-full transition-colors" title="Edit"><!></button> <button class="p-1.5 hover:bg-rose-50 text-slate-400 hover:text-rose-600 rounded-full transition-colors" title="Remove"><!></button></div></div>'),Mt=P('<div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="bg-white p-5 rounded-2xl border border-slate-200 shadow-sm"><div class="text-xs font-bold uppercase tracking-wider text-slate-400 mb-1">Monthly Burn</div> <div class="text-2xl font-bold text-slate-800"> </div></div> <div class="bg-white p-5 rounded-2xl border border-slate-200 shadow-sm"><div class="text-xs font-bold uppercase tracking-wider text-slate-400 mb-1">Annual Impact</div> <div class="text-2xl font-bold text-slate-800"> </div></div> <div class="bg-amber-50 p-5 rounded-2xl border border-amber-100 shadow-sm flex items-center gap-4"><div class="p-3 bg-white rounded-full text-amber-500 shadow-sm"><!></div> <div><div class="text-sm text-amber-900 font-medium">Inflation Alert</div> <div class="text-xs text-amber-700/80">Review annually. Prices tend to creep up.</div></div></div></div> <div class="space-y-4"><div class="flex items-center justify-between pb-2 border-b border-slate-200"><h2 class="font-bold text-slate-700 flex items-center gap-2">Active Recurring Charges <span class="bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full text-xs"> </span></h2> <button class="text-slate-400 hover:text-slate-600"><!></button></div> <!> <button class="w-full border-2 border-dashed border-slate-200 rounded-xl p-4 flex items-center justify-center text-slate-400 hover:border-slate-300 hover:bg-slate-50 transition-all group"><!> </button></div>',1),Et=P("<button> </button>"),Nt=P('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"><div class="bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden max-h-[90vh] overflow-y-auto"><div class="p-6 border-b border-gray-100 bg-gray-50 flex justify-between items-center"><h3 class="font-serif font-bold text-2xl text-slate-800">Add Subscription</h3> <button class="text-gray-400 hover:text-gray-600">Close</button></div> <div class="p-6 space-y-4"><div><label class="block text-xs font-bold uppercase text-gray-500 mb-1">Service Name</label> <input type="text" class="w-full px-4 py-3 rounded-xl border border-gray-200" placeholder="e.g. Netflix" autoFocus/></div> <div class="grid grid-cols-2 gap-4"><div><label class="block text-xs font-bold uppercase text-gray-500 mb-1">Cost</label> <input type="number" class="w-full px-4 py-3 rounded-xl border border-gray-200" placeholder="0.00" step="0.01"/></div> <div><label class="block text-xs font-bold uppercase text-gray-500 mb-1">Cycle</label> <select class="w-full px-4 py-3 rounded-xl border border-gray-200 bg-white"><option>Monthly</option><option>Yearly</option></select></div></div> <div><label class="block text-xs font-bold uppercase text-gray-500 mb-1">Difficulty to Cancel</label> <div class="flex gap-2"></div></div> <div><label class="block text-xs font-bold uppercase text-gray-500 mb-1">Cancellation Instructions</label> <textarea class="w-full px-4 py-3 rounded-xl border border-gray-200 h-24" placeholder="How do we turn this off?"></textarea></div> <div><label class="block text-xs font-bold uppercase text-gray-500 mb-1">Payment Method (Optional)</label> <input type="text" class="w-full px-4 py-3 rounded-xl border border-gray-200" placeholder="e.g. Chase ending in 1234"/></div></div> <div class="p-6 bg-gray-50 flex justify-end gap-3"><button class="px-6 py-2 rounded-xl font-bold text-gray-500 hover:bg-gray-200">Cancel</button> <button class="px-6 py-2 rounded-xl font-bold bg-slate-900 text-white hover:bg-slate-800 disabled:opacity-50"> </button></div></div></div>'),Ut=P('<div class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-md"><div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]"><div class="p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50"><div class="flex items-center gap-3"><div class="p-2 bg-indigo-100 text-indigo-700 rounded-lg"><!></div> <h3 class="font-serif font-bold text-xl text-slate-800">Cancellation Request</h3></div> <button class="p-2 hover:bg-slate-200 rounded-full transition-colors text-slate-400"><!></button></div> <div class="flex-1 overflow-y-auto p-8 bg-slate-50/30"><div class="bg-white shadow-sm border border-slate-200 p-12 aspect-[1/1.4] max-w-[500px] mx-auto text-sm text-slate-800 space-y-8 font-serif"><div class="space-y-1"><p class="font-bold"> </p> <p> </p></div> <div class="space-y-4"><p class="font-bold"> </p> <div contenteditable="true" class="prose prose-sm max-w-none focus:outline-none focus:ring-2 focus:ring-indigo-100 rounded-lg p-2 -m-2 transition-all min-h-[200px]"></div> <div class="pt-8 space-y-1"><p>Sincerely,</p> <div class="w-48 h-12 border-b border-slate-300"></div> <p class="font-bold"> </p> <p class="text-xs text-slate-500 italic"> </p></div></div></div></div> <div class="p-6 border-t border-slate-100 bg-white flex justify-end gap-3"><button class="mr-auto px-4 py-2 text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors">Reset to Default</button> <button class="px-5 py-2.5 rounded-xl font-bold text-slate-500 hover:bg-slate-100 flex items-center gap-2 transition-all"><!> Print</button> <button class="px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl shadow-lg hover:shadow-indigo-200 hover:bg-indigo-700 flex items-center gap-2 transition-all"><!> Download PDF</button></div></div></div>'),Dt=P(`<div class="max-w-5xl mx-auto p-6 md:p-8 space-y-8 animate-in fade-in duration-500"><div class="flex flex-col md:flex-row md:items-center justify-between gap-6 mr-100"><div><h1 class="font-serif font-bold text-3xl text-slate-900 flex items-center gap-3"><div class="p-2.5 bg-indigo-100 rounded-xl text-indigo-700"><!></div> Subscriptions & Services</h1> <p class="text-slate-500 mt-2 text-lg">Identify recurring charges to prevent "Zombie Bills" from
                draining the estate.</p></div> <button class="px-4 py-2.5 bg-slate-900 text-white font-semibold rounded-xl flex items-center gap-2 hover:bg-slate-800 transition-all shadow-sm group"><!> Add Service</button></div> <!> <!> <!></div>`);function sa(G,_){Ge(_,!1);const i=()=>tt(dt,"$estateProfile",te),[te,A]=et(),X=R(),Y=R();let n=R([]),C=R(!1),o=R({difficulty:"Easy",cycle:"Monthly",cost:0}),M=R(null),ae=R(!1),V=R("");function _e(s){return`
            <p>Dear Customer Service Team,</p>
            
            <p>Please accept this formal request to cancel the account and all associated services for <strong>${i().ownerName||"[Name Not Set]"}</strong>, effective immediately.</p>
            
            <p><strong>Account Details:</strong></p>
            <ul>
                <li>Service: ${s.name}</li>
                <li>Billing Address: ${i().legalAddress||"[Address Not Set]"}</li>
                <li>Payment Method: ${s.paymentMethod||"On File"}</li>
            </ul>

            <p>This request is being made on behalf of the estate by the designated executor. We request that you confirm this cancellation in writing and provide a final statement of account.</p>
            
            <p>Thank you for your prompt attention to this matter.</p>
        `}He(()=>{c(n,ct("subscriptions",[]))});function ne(){vt("subscriptions",a(n))}function he(){if(a(o).name){if(a(o).id){const s=a(n).find(v=>v.id===a(o).id),l=[];s&&(s.name!==a(o).name&&l.push({field:"name",oldValue:s.name,newValue:a(o).name}),s.cost!==a(o).cost&&l.push({field:"cost",oldValue:s.cost,newValue:a(o).cost}),s.cycle!==a(o).cycle&&l.push({field:"cycle",oldValue:s.cycle,newValue:a(o).cycle})),c(n,a(n).map(v=>v.id===a(o).id?{...a(o)}:v)),Ue.logEvent({module:"Subscriptions",action:"UPDATE",entityType:"Subscription",entityId:a(o).id,entityName:a(o).name||"Unnamed Subscription",changes:l,userContext:i().ownerName||"User"})}else{const s=crypto.randomUUID();c(n,[...a(n),{id:s,name:a(o).name||"Unknown Service",cost:Number(a(o).cost)||0,cycle:a(o).cycle||"Monthly",paymentMethod:a(o).paymentMethod||"",nextBilling:a(o).nextBilling||"",difficulty:a(o).difficulty||"Medium",cancellationInstructions:a(o).cancellationInstructions||"",loginUrl:a(o).loginUrl||"",notes:a(o).notes||""}]),Ue.logEvent({module:"Subscriptions",action:"CREATE",entityType:"Subscription",entityId:s,entityName:a(o).name||"Unknown Service",userContext:i().ownerName||"User"})}ne(),ye()}}function de(s){c(o,{...s}),c(C,!0)}function ye(){c(C,!1),c(o,{id:void 0,difficulty:"Easy",cycle:"Monthly",cost:0,name:"",paymentMethod:"",nextBilling:"",cancellationInstructions:"",loginUrl:"",notes:""})}function ce(s){if(!confirm("Remove this subscription?"))return;const l=a(n).find(v=>v.id===s);c(n,a(n).filter(v=>v.id!==s)),ne(),l&&Ue.logEvent({module:"Subscriptions",action:"DELETE",entityType:"Subscription",entityId:s,entityName:l.name,userContext:i().ownerName||"User"})}function we(s){c(M,s),c(V,_e(s)),c(ae,!0),Ue.logEvent({module:"Subscriptions",action:"EXPORT",entityType:"Cancellation Letter",entityId:s.id,entityName:`${s.name} Cancellation Letter`,userContext:i().ownerName||"User"})}function De(){a(M)&&c(V,_e(a(M)))}function Se(){c(ae,!1),c(M,null)}Te(()=>a(n),()=>{c(X,a(n).reduce((s,l)=>s+(l.cycle==="Monthly"?l.cost:l.cost/12),0))}),Te(()=>a(n),()=>{c(Y,a(n).reduce((s,l)=>s+(l.cycle==="Monthly"?l.cost*12:l.cost),0))}),Xe(),Be();var W=Dt(),Z=t(W),ve=t(Z),ue=t(ve),ke=t(ue),pe=t(ke);ut(pe,{class:"w-8 h-8"}),e(ke),z(),e(ue),z(2),e(ve);var be=r(ve,2),Ie=t(be);Re(Ie,{class:"w-4 h-4 group-hover:scale-110 transition-transform"}),z(),e(be),e(Z);var Ce=r(Z,2);{var J=s=>{nt(s,{type:"subscriptions",onAdd:()=>c(C,!0)})},q=s=>{var l=Mt(),v=Ye(l),x=t(v),I=r(t(x),2),E=t(I,!0);e(I),e(x);var N=r(x,2),h=r(t(N),2),U=t(h,!0);e(h),e(N);var y=r(N,2),b=t(y),f=t(b);pt(f,{class:"w-6 h-6"}),e(b),z(2),e(y),e(v);var w=r(v,2),$=t(w),T=t($),H=r(t(T)),Q=t(H,!0);e(H),e(T);var j=r(T,2),re=t(j);bt(re,{class:"w-4 h-4"}),e(j),e($);var O=r($,2);je(O,1,()=>a(n),u=>u.id,(u,m)=>{var S=Ct(),ee=t(S);kt(ee,{get sub(){return a(m)},onCancel:()=>ce(a(m).id),onGenerateLetter:()=>we(a(m))});var oe=r(ee,2),se=t(oe),Ee=t(se);ft(Ee,{size:14}),e(se);var me=r(se,2),ge=t(me);ze(ge,{size:14}),e(me),e(oe),e(S),k("click",se,()=>de(a(m))),k("click",me,()=>ce(a(m).id)),L(u,S)});var F=r(O,2),D=t(F);Re(D,{class:"w-4 h-4 mr-2 group-hover:scale-110 transition-transform"});var xe=r(D);e(F),e(w),B((u,m)=>{p(E,u),p(U,m),p(Q,(a(n),d(()=>a(n).length))),p(xe,` Tracking ${a(n),d(()=>a(n).length)??""} services... Add another?`)},[()=>(a(X),d(()=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a(X)))),()=>(a(Y),d(()=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a(Y))))]),k("click",F,()=>c(C,!0)),L(s,l)};le(Ce,s=>{a(n),d(()=>a(n).length===0)?s(J):s(q,!1)})}var K=r(Ce,2);{var fe=s=>{var l=Nt(),v=t(l),x=t(v),I=r(t(x),2);e(x);var E=r(x,2),N=t(E),h=r(t(N),2);Pe(h),e(N);var U=r(N,2),y=t(U),b=r(t(y),2);Pe(b),e(y);var f=r(y,2),w=r(t(f),2);B(()=>{a(o),We(()=>{})}),e(f),e(U);var $=r(U,2),T=r(t($),2);je(T,4,()=>["Easy","Medium","Hard"],Je,(u,m)=>{var S=Et(),ee=t(S,!0);e(S),B(()=>{qe(S,1,`px-4 py-2 rounded-lg border text-sm font-bold transition-all ${a(o),d(()=>a(o).difficulty===m?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-500 border-gray-200 hover:border-gray-300")??""}`),p(ee,m)}),k("click",S,()=>ie(o,a(o).difficulty=m)),L(u,S)}),e(T),e($);var H=r($,2),Q=r(t(H),2);Ze(Q),e(H);var j=r(H,2),re=r(t(j),2);Pe(re),e(j),e(E);var O=r(E,2),F=t(O),D=r(F,2),xe=t(D,!0);e(D),e(O),e(v),e(l),B(()=>{D.disabled=(a(o),d(()=>!a(o).name)),p(xe,(a(o),d(()=>a(o).id?"Update Subscription":"Save Subscription")))}),k("click",I,ye),Ne(h,()=>a(o).name,u=>ie(o,a(o).name=u)),Ne(b,()=>a(o).cost,u=>ie(o,a(o).cost=u)),Qe(w,()=>a(o).cycle,u=>ie(o,a(o).cycle=u)),Ne(Q,()=>a(o).cancellationInstructions,u=>ie(o,a(o).cancellationInstructions=u)),Ne(re,()=>a(o).paymentMethod,u=>ie(o,a(o).paymentMethod=u)),k("click",F,()=>c(C,!1)),k("click",D,he),L(s,l)};le(K,s=>{a(C)&&s(fe)})}var Le=r(K,2);{var Me=s=>{var l=Ut(),v=t(l),x=t(v),I=t(x),E=t(I),N=t(E);xt(N,{size:20}),e(E),z(2),e(I);var h=r(I,2),U=t(h);ze(U,{size:20}),e(h),e(x);var y=r(x,2),b=t(y),f=t(b),w=t(f),$=t(w);e(w);var T=r(w,2),H=t(T);e(T),e(f);var Q=r(f,2),j=t(Q),re=t(j);e(j);var O=r(j,2),F=r(O,2),D=r(t(F),4),xe=t(D,!0);e(D);var u=r(D,2),m=t(u);e(u),e(F),e(Q),e(b),e(y);var S=r(y,2),ee=t(S),oe=r(ee,2),se=t(oe);mt(se,{size:16}),z(),e(oe);var Ee=r(oe,2),me=t(Ee);gt(me,{size:16}),z(),e(Ee),e(S),e(v),e(l),B(ge=>{p($,`Date: ${ge??""}`),p(H,`To: ${a(M),d(()=>a(M).name)??""} Billing Department`),p(re,`Subject: Account Cancellation Request - ${a(M),d(()=>a(M).name)??""}`),p(xe,(i(),d(()=>i().executorName||"[Executor Name Not Set]"))),p(m,`Executor of the Estate of ${i(),d(()=>i().ownerName)??""}`)},[()=>d(()=>new Date().toLocaleDateString())]),k("click",h,Se),_t("innerHTML",O,()=>a(V),ge=>c(V,ge)),k("click",ee,De),$e(1,v,()=>rt),$e(3,l,()=>ot),L(s,l)};le(Le,s=>{a(ae)&&a(M)&&s(Me)})}e(W),k("click",be,()=>c(C,!0)),L(G,W),Ve(),A()}export{sa as component};
